(this["webpackJsonpathena-ui"]=this["webpackJsonpathena-ui"]||[]).push([[0],{286:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),i=n(11),s=n.n(i),o=n(332),j=n(331),l=(n(164),n(15)),d=n(31),u=n(27),b=n.n(u),m=n(38),h=n(14),x=n(30),O=n(334),p=n(12),f=n(20),g=n(28),v=n(320),y=n(321),S=n(322),w=f.b({email:f.c().email().required("Please enter a valid email"),password:f.c().min(1).required("Please enter a password")}),I=function(e){var t=e.handleSubmit,n=e.toggleSignUp;return Object(a.jsx)(p.c,{initialValues:{email:"",password:""},validationSchema:w,onSubmit:function(e,n){var a=n.setSubmitting;setTimeout((function(){t(e.email,e.password),a(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(a.jsx)(p.b,{children:Object(a.jsxs)(v.a,{container:!0,spacing:1,direction:"column",alignItems:"stretch",children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(p.a,{component:g.a,name:"email",label:"Email Address *",variant:"outlined"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(p.a,{component:g.a,type:"password",name:"password",label:"Password *",variant:"outlined"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(y.a,{type:"submit",variant:"contained",disabled:t,color:"primary",children:"Sign In"})}),Object(a.jsxs)(v.a,{container:!0,item:!0,direction:"row",justify:"space-evenly",children:[Object(a.jsx)(v.a,{item:!0,xs:6,sm:6,children:Object(a.jsx)(S.a,{component:"button",onClick:n,children:"Forgot password?"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:6,sm:6,children:Object(a.jsx)(S.a,{component:"button",onClick:n,children:"Don't have an account? Sign Up"})})]})]})})}})},P=f.b({username:f.c().required("Please enter a username"),email:f.c().email().required("Please enter a valid email"),password:f.c().min(8).required("Please enter a password"),confirmPassword:f.c().required("Please re-enter password").test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}),k=function(e){var t=e.handleSubmit,n=e.toggleSignUp;return Object(a.jsx)(p.c,{initialValues:{username:"",email:"",password:"",confirmPassword:""},validationSchema:P,onSubmit:function(e,n){var a=n.setSubmitting;setTimeout((function(){t(e.username,e.email,e.password),a(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(a.jsx)(p.b,{className:"d-flex flex-column justify-content-between",children:Object(a.jsxs)(v.a,{container:!0,spacing:1,direction:"column",alignItems:"stretch",children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(p.a,{component:g.a,name:"username",label:"Username",variant:"outlined"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(p.a,{className:"mb-3",component:g.a,name:"email",label:"Email Address *",variant:"outlined"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(p.a,{className:"mb-3",component:g.a,name:"password",label:"Password *",type:"password",variant:"outlined"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(p.a,{className:"mb-3",component:g.a,name:"confirmPassword",label:"Confirm Password *",type:"password",variant:"outlined"})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,justify:"center",children:Object(a.jsx)(y.a,{type:"submit",variant:"contained",disabled:t,color:"primary",children:"Register"})}),Object(a.jsx)(v.a,{item:!0,xs:6,sm:6,justify:"center",children:Object(a.jsx)(S.a,{component:"button",onClick:n,children:"Already have an account? Log In"})})]})})}})},E=n(323),D=n(324),C=n(325),A=n(333),L=n(335),F=n(326),N=n(63),T=n(71);function q(e){return Object(a.jsx)(O.a,Object(x.a)({elevation:6,variant:"filled"},e))}var U=function(){var e=Object(c.useState)(!1),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),s=Object(h.a)(i,2),o=s[0],j=s[1],d=Object(c.useState)(!1),u=Object(h.a)(d,2),x=u[0],O=u[1],p=Object(l.g)(),f=!!localStorage.getItem("my-jwt");Object(c.useEffect)((function(){f&&p.push("/athena")}),[f,p]);var g=function(){var e=Object(m.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("/api/login",{email:t,password:n}).then((function(e){localStorage.setItem("my-jwt",e.data.token),p.push("/athena")}),(function(e){j("Incorrect email or password")}));case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)(C.a,{maxWidth:"sm",children:Object(a.jsx)(A.a,{my:4,children:Object(a.jsxs)(v.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,children:o?Object(a.jsx)(L.a,{onClose:function(){return r(!1)},show:n,delay:3e3,autohide:!0,children:Object(a.jsx)(q,{severity:"error",children:Object(a.jsx)("strong",{children:o})})}):null}),Object(a.jsxs)(v.a,{container:!0,item:!0,xs:12,sm:12,direction:"column",children:[Object(a.jsx)(F.a,{children:x?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(E.a,{title:"Sign Up"}),Object(a.jsx)(D.a,{children:Object(a.jsx)(k,{handleSubmit:function(e,t,n){return function(e,t,n){T.post("/api/register",{username:e,email:t,password:n}).then((function(e){localStorage.setItem("my-jwt",e.data.token),p.push("/athena")}),(function(e){j("Email is already in use"),r(!0)}))}(e,t,n)},toggleSignUp:function(){return O(!1)}})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(E.a,{title:"Sign In"}),Object(a.jsx)(D.a,{children:Object(a.jsx)(I,{handleSubmit:function(e,t){return g(e,t)},toggleSignUp:function(){return O(!0)}})})]})}),Object(a.jsxs)(N.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(S.a,{color:"inherit",href:"https://react-site-five.vercel.app/",children:"Issack John"})," ",(new Date).getFullYear(),"."]})]})]})})})},M=n(144),W=function(e){var t=e.component,n=(e.handleLogout,Object(M.a)(e,["component","handleLogout"]));return Object(a.jsx)(l.b,Object(x.a)(Object(x.a)({},n),{},{render:function(e){return localStorage.getItem("my-jwt")?Object(a.jsx)(t,Object(x.a)({},e)):Object(a.jsx)(l.a,{to:{pathname:"/athena/auth",state:{from:e.location}}})}}))},J=n(142),R=n.n(J),V=n(327),B=n(328),z=function(e){var t=e.isLoading;return Object(a.jsx)("div",{children:Object(a.jsx)(V.a,{in:t,style:{transitionDelay:t?"800ms":"0ms"},unmountOnExit:!0,children:Object(a.jsx)(B.a,{})})})},G=n(71),Y=function(e){var t=Object(l.h)().productId,n=Object(c.useState)(!1),r=Object(h.a)(n,2),i=r[0],s=r[1],o=Object(c.useState)({}),j=Object(h.a)(o,2),d=j[0],u=j[1],x=Object(c.useCallback)(Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,G.post("/api/v1/getCubeMetaData/"+t).then((function(e){return JSON.stringify(data)}),(function(e){console.log(e)}));case 3:s(!1);case 4:case"end":return e.stop()}}),e)}))),[t]);Object(c.useEffect)((function(){x().then((function(e){"FAILED"===e.data.status?u(e.data.object.split(".")[0]):u(e.data.object)}),(function(e){}))}),[x]);return Object(a.jsx)(C.a,{maxWidth:"sm",children:Object(a.jsx)(A.a,{my:20,children:i?Object(a.jsx)(z,{isLoading:i}):R.a.isEmpty(d)?Object(a.jsx)("h1",{children:"Something went wrong..."}):function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:e.cubeTitleEn}),Object(a.jsx)("p",{children:e.productId}),Object(a.jsx)("p",{children:e.archiveStatusEn}),Object(a.jsx)("p",{children:"From: ".concat(e.cubeStartDate," to ").concat(e.cubeEndDate)}),Object(a.jsxs)("p",{children:["Released: ",e.releaseTime]})]})}(d)})})},H=n(329),K=n(71),Q=f.b({productId:f.a().required("Id must be 8 digits long")});function X(e){return Object(a.jsx)(O.a,Object(x.a)({elevation:6,variant:"filled"},e))}var Z=function(){var e=Object(c.useState)({}),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),s=Object(h.a)(i,2),o=s[0],j=s[1],u=Object(c.useState)(!1),x=Object(h.a)(u,2),O=x[0],f=x[1],S=Object(c.useState)(!1),w=Object(h.a)(S,2),I=w[0],P=w[1],k=Object(l.h)().name,E=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.productId!==t){e.next=4;break}return j("Item already exists"),P(!0),e.abrupt("return");case 4:return f(!0),e.next=7,K.post("/api/v1/getCubeMetaData/"+t).then((function(e){"FAILED"===e.data.status?r(e.data.object.split(".")[0]):r(e.data.object)}),(function(e){j(e.message),P(!0)}));case 7:f(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(v.a,{container:!0,direction:"column",spacing:2,children:[Object(a.jsx)(v.a,{container:!0,item:!0,direction:"column",xs:12,children:Object(a.jsx)(p.c,{initialValues:{productId:""},validationSchema:Q,onSubmit:function(e,t){var n=t.setSubmitting;setTimeout((function(){E(e.productId),n(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(a.jsxs)(p.b,{children:[Object(a.jsx)(p.a,{component:g.a,name:"productId",label:"Product Id",variant:"standard",InputProps:{notched:!0}}),Object(a.jsx)(y.a,{className:"mt-2 ml-1",variant:"contained",type:"submit",color:"primary",disabled:t,children:"Submit"})]})}})}),Object(a.jsx)(v.a,{container:!0,item:!0,direction:"column",xs:12,children:o?Object(a.jsx)(L.a,{className:"mx-auto",onClose:function(){return P(!1)},show:I,delay:3e3,autohide:!0,children:Object(a.jsx)(X,{severity:"error",children:Object(a.jsx)("strong",{children:o})})}):null}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,children:O||_.isEmpty(n)?Object(a.jsx)(z,{isLoading:O}):Object(a.jsx)(F.a,{children:Object(a.jsx)(H.a,{style:{textDecoration:"none"},component:d.b,to:"/athena/".concat(k,"/detail/").concat(n.productId),children:Object(a.jsxs)(D.a,{children:[Object(a.jsx)(N.a,{gutterBottom:!0,variant:"h5",component:"h2",children:n.cubeTitleEn}),Object(a.jsxs)(N.a,{variant:"body2",color:"textSecondary",component:"p",children:["Product ID: ",n.productId]}),Object(a.jsxs)(N.a,{variant:"body2",color:"textSecondary",component:"p",children:["Status: ",n.archiveStatusEn]}),Object(a.jsx)(N.a,{variant:"body2",color:"textSecondary",component:"p",children:"From: ".concat(n.cubeStartDate," to ").concat(n.cubeEndDate)}),Object(a.jsx)(N.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(a.jsxs)("small",{children:["Released: ",n.releaseTime]})})]})})})})]})})},$=n(71),ee=f.b({productId:f.a().required("Id must be 8 digits long")}),te=function(e){var t=Object(c.useState)([]),n=Object(h.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)(""),o=Object(h.a)(s,2),j=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(h.a)(d,2),O=u[0],f=u[1],S=Object(c.useState)(!1),w=Object(h.a)(S,1)[0],I=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,$.post("/api/v1/getCubeMetaData/"+t).then((function(e){if("FAILED"===e.data.status)i(e.data.object.split(".")[0]);else for(var t=function(t){r.some((function(t){return t.object.productId===e.data.object.productId}))?(l("Item already exists"),f(!0)):i((function(n){return Object(x.a)(Object(x.a)({},n),e.data[t])}))},n=0;n<e.data.length;n++)t(n)}),(function(e){l(e.message),f(!0)}));case 3:w(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(v.a,{container:!0,direction:"column",spacing:1,children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,children:Object(a.jsxs)(N.a,{variant:"body1",align:"center",children:[O?j:null,r]})}),Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,sm:12,children:Object(a.jsx)(p.c,{initialValues:{productId:""},validationSchema:ee,onSubmit:function(e,t){var n=t.setSubmitting;setTimeout((function(){I(e.productId),n(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(a.jsxs)(p.b,{children:[Object(a.jsx)(p.a,{component:g.a,name:"productId",label:"Product Id",variant:"standard",InputProps:{notched:!0}}),Object(a.jsx)(y.a,{className:"mt-2 ml-1",variant:"contained",type:"submit",color:"primary",disabled:t,children:"Submit"})]})}})})]})},ne=function(e){var t=function(e){var t,n;switch(e){case"seeAll":n="See All Tables",t=Object(a.jsx)(te,{});break;case"searchAll":n="Search All Tables",t=Object(a.jsx)(Z,{});break;default:n="three",t=Object(a.jsx)(Z,{})}return{title:n,form:t}}(Object(l.h)().name),n=t.title,c=t.form;return Object(a.jsx)(C.a,{maxWidth:"sm",children:Object(a.jsx)(A.a,{my:20,children:Object(a.jsxs)(v.a,{direction:"row",children:[Object(a.jsx)(v.a,{item:!0,xs:12,sm:12,children:Object(a.jsx)(N.a,{align:"center",children:n})}),Object(a.jsx)(v.a,{item:!0,xs:12,sm:12,children:Object(a.jsx)(N.a,{align:"center",children:c})})]})})})},ae=n(330),ce=Object(ae.a)({root:{height:"100%",display:"flex",flexDirection:"column"},cardContent:{flexGrow:1},title:{fontSize:32}}),re=function(e){var t=e.title,n=e.description,c=e.to,r=ce();return Object(a.jsx)(F.a,{className:r.root,children:Object(a.jsx)(H.a,{style:{textDecoration:"none"},component:d.b,to:c,children:Object(a.jsxs)(D.a,{className:r.cardContent,children:[Object(a.jsx)(N.a,{className:r.title,color:"textSecondary",gutterBottom:!0,children:t}),Object(a.jsx)(N.a,{variant:"body2",component:"p",children:n})]})})})},ie=function(e){return Object(a.jsxs)(v.a,{container:!0,direction:"row",spacing:2,children:[Object(a.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(re,{title:"See all tables",description:"Complete inventory of data tables available through this Statistics Canada API",to:"/athena/seeAll"})}),Object(a.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(re,{title:"Meta data table search",description:"Retrieve the metadata supporting the data at table level",to:"/athena/searchAll"})})]})},se=function(e){return Object(a.jsx)(C.a,{maxWidth:"sm",children:Object(a.jsxs)(A.a,{my:20,children:[Object(a.jsx)(N.a,{color:"textPrimary",component:"h5",variant:"h2",align:"center",children:"What would you like to do?"}),Object(a.jsx)(ie,{})]})})};function oe(){var e=Object(l.g)(),t=function(){localStorage.removeItem("my-jwt"),e.push("/athena")};return Object(a.jsx)(d.a,{basename:"",children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/athena/auth",component:U}),Object(a.jsx)(W,{handleLogout:t,path:"/athena/:name/detail/:productId",component:Y}),Object(a.jsx)(W,{handleLogout:t,path:"/athena/:name",component:ne}),Object(a.jsx)(W,{handleLogout:t,path:"/",component:se})]})})}var je=n(81),le=n(143),de=n(336),ue=Object(le.a)({palette:{primary:{main:"#4a4e69"},secondary:{main:"#9a8c98"},error:{main:je.a.A400},background:{default:"#fff"}}}),be=Object(de.a)(ue);s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsxs)(j.a,{theme:be,children:[Object(a.jsx)(o.a,{}),Object(a.jsx)(oe,{})]})}),document.getElementById("root"))}},[[286,1,2]]]);
//# sourceMappingURL=main.94af7348.chunk.js.map